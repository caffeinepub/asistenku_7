{
  "kind": "coverage_report",
  "version": "1.0",
  "generatedAt": "2026-02-14T15:48:39.774Z",
  "sources": {
    "buildRequest": true,
    "implementationPlan": true
  },
  "requirements": {
    "total": 3,
    "implemented": 1,
    "items": [
      {
        "id": "REQ-1",
        "summary": "In `backend/main.mo`, ensure the following methods exist with exactly these signatures (stable/public API):\n- `public query func hasSuperadmin() : async Bool`\n- `public shared({caller}) func claimSuperadmin() : async { ok: Bool; message: Text }`\n\nImplement behavior:\n- If no superadmin exists yet: set `caller` as the superadmin and mark it ACTIVE immediately (no name/email/WhatsApp requirements); return `{ ok = true; message = <non-empty success text> }`.\n- If a superadmin already exists and `caller` is that superadmin: return `{ ok = true; message = <idempotent success text> }`.\n- If a superadmin already exists and `caller` is not the superadmin: return `{ ok = false; message = <non-empty error text> }`.\n\nDo not add any required fields for superadmin such as name/email/WhatsApp.",
        "status": "unknown",
        "plannedFiles": [],
        "matchedFiles": []
      },
      {
        "id": "REQ-2",
        "summary": "In the existing Internal Login page file `frontend/src/pages/internal/InternalLogin.tsx`, add a \"Claim Superadmin\" UI block tied to the backend methods.\n\nOn page load:\n- Call `actor.hasSuperadmin()`.\n- Store state as `hasSuperadmin: boolean | null`.\n- While `hasSuperadmin === null`, show a small loading indicator.\n\nRendering rules:\n- If `hasSuperadmin === false`, render a card at the top of the role grid (or immediately before the grid) with:\n  - Title: \"Claim Superadmin\"\n  - Description: \"Only available once. After it is claimed, this card disappears.\"\n  - Button: \"Claim Superadmin\"\n- If `hasSuperadmin === true`, do not render the card at all.\n\nInteraction:\n- The user must complete Internet Identity login first (keep the existing Internet Identity login button behavior intact), then they can click \"Claim Superadmin\" (if shown).\n- On clicking the button, call `actor.claimSuperadmin()`.\n  - If `ok === true`, refresh `hasSuperadmin` by calling `actor.hasSuperadmin()` again (or perform a light page reload limited to this page).\n  - If `ok === false`, display the backend `message` as an error.\n\nUI wording constraint:\n- Do not use the word \"service\" or \"Service\" anywhere on this page.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/pages/internal/InternalLogin.tsx"
        ],
        "matchedFiles": [
          "frontend/src/pages/internal/InternalLogin.tsx"
        ]
      },
      {
        "id": "REQ-3",
        "summary": "Update the single existing frontend canister binding/helper file `frontend/src/hooks/useActor.ts` (or equivalent within that same file only) so the Internal Login page can safely call `hasSuperadmin()` and `claimSuperadmin()` on the backend actor after Internet Identity login.\n\nThis must be done without global refactors and without changing routing; limit changes strictly to enabling these method calls from the Internal Login page.",
        "status": "missing",
        "plannedFiles": [
          "frontend/src/hooks/useActor.ts"
        ],
        "matchedFiles": []
      }
    ]
  },
  "changedFiles": [
    "backend/main.mo",
    "build-request.json",
    "feature_evidence.json",
    "frontend-file-summaries.txt",
    "frontend-implementation-plan.json",
    "frontend/src/pages/internal/InternalLogin.tsx",
    "project_state.json",
    "scratch/component-selection.json",
    "spec.md",
    "spec_vs_diff_report.json"
  ]
}